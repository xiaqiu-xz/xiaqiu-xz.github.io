<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TDD: MRUList å®Œæ•´å®ç°</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Syne:wght@400;600;800&display=swap');

        :root {
            --bg: #0d0f14;
            --surface: #13161e;
            --border: #1e2330;
            --red: #e05c5c;
            --red-dim: #3a1a1a;
            --green: #4caf7d;
            --green-dim: #0f2a1a;
            --amber: #d4a843;
            --amber-dim: #2a2010;
            --blue: #5b8fff;
            --blue-dim: #0f1e40;
            --text: #c8d0e0;
            --text-dim: #5a6480;
            --text-bright: #eef2ff;
            --mono: 'JetBrains Mono', monospace;
            --sans: 'Syne', sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: var(--sans);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* â”€â”€ Header â”€â”€ */
        header {
            border-bottom: 1px solid var(--border);
            padding: 2rem 3rem;
            display: flex;
            align-items: center;
            gap: 2rem;
            background: var(--surface);
        }

        .tdd-cycle {
            display: flex;
            gap: 0;
            align-items: center;
            font-family: var(--mono);
            font-size: .75rem;
            font-weight: 700;
            letter-spacing: .05em;
        }

        .tdd-cycle span {
            padding: .35rem .9rem;
            border-radius: 2px;
        }

        .tdd-cycle .r {
            background: var(--red-dim);
            color: var(--red);
        }

        .tdd-cycle .arr {
            color: var(--text-dim);
            padding: 0 .3rem;
        }

        .tdd-cycle .g {
            background: var(--green-dim);
            color: var(--green);
        }

        .tdd-cycle .rf {
            background: var(--amber-dim);
            color: var(--amber);
        }

        h1 {
            font-family: var(--sans);
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-bright);
        }

        h1 em {
            font-style: normal;
            color: var(--blue);
        }

        /* â”€â”€ Nav tabs â”€â”€ */
        nav {
            display: flex;
            gap: 0;
            border-bottom: 1px solid var(--border);
            padding: 0 3rem;
            background: var(--surface);
            overflow-x: auto;
        }

        nav button {
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            color: var(--text-dim);
            font-family: var(--mono);
            font-size: .8rem;
            font-weight: 600;
            padding: .9rem 1.4rem;
            cursor: pointer;
            white-space: nowrap;
            transition: color .2s, border-color .2s;
        }

        nav button:hover {
            color: var(--text);
        }

        nav button.active {
            color: var(--text-bright);
            border-bottom-color: var(--blue);
        }

        nav button .badge {
            display: inline-block;
            margin-left: .4rem;
            padding: .1rem .4rem;
            border-radius: 2px;
            font-size: .65rem;
        }

        nav button .r-badge {
            background: var(--red-dim);
            color: var(--red);
        }

        nav button .g-badge {
            background: var(--green-dim);
            color: var(--green);
        }

        nav button .rf-badge {
            background: var(--amber-dim);
            color: var(--amber);
        }

        /* â”€â”€ Main â”€â”€ */
        main {
            max-width: 1100px;
            margin: 0 auto;
            padding: 2.5rem 3rem;
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
        }

        /* â”€â”€ Step header â”€â”€ */
        .step-header {
            display: flex;
            align-items: flex-start;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .phase-pill {
            flex-shrink: 0;
            padding: .4rem 1rem;
            border-radius: 3px;
            font-family: var(--mono);
            font-size: .8rem;
            font-weight: 700;
            letter-spacing: .06em;
            text-transform: uppercase;
        }

        .phase-pill.red {
            background: var(--red-dim);
            color: var(--red);
            border: 1px solid #5a2020;
        }

        .phase-pill.green {
            background: var(--green-dim);
            color: var(--green);
            border: 1px solid #1a4a2a;
        }

        .phase-pill.refactor {
            background: var(--amber-dim);
            color: var(--amber);
            border: 1px solid #4a3a10;
        }

        .phase-pill.final {
            background: var(--blue-dim);
            color: var(--blue);
            border: 1px solid #1a3060;
        }

        .step-title {
            font-size: 1.3rem;
            font-weight: 800;
            color: var(--text-bright);
            margin-bottom: .3rem;
        }

        .step-desc {
            color: var(--text-dim);
            font-size: .9rem;
        }

        /* â”€â”€ Code block â”€â”€ */
        .code-wrap {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 6px;
            overflow: hidden;
            margin: 1.5rem 0;
        }

        .code-label {
            display: flex;
            align-items: center;
            gap: .7rem;
            padding: .6rem 1.2rem;
            border-bottom: 1px solid var(--border);
            font-family: var(--mono);
            font-size: .72rem;
            color: var(--text-dim);
            background: #0f1118;
        }

        .code-label .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .dot-red {
            background: #e05c5c;
        }

        .dot-green {
            background: #4caf7d;
        }

        .dot-amber {
            background: #d4a843;
        }

        pre {
            margin: 0;
            padding: 1.5rem;
            overflow-x: auto;
            font-family: var(--mono);
            font-size: .82rem;
            line-height: 1.7;
            tab-size: 4;
        }

        /* Syntax colors */
        .kw {
            color: #7c9eff;
        }

        .ty {
            color: #4fc1a6;
        }

        .fn {
            color: #dfd077;
        }

        .str {
            color: #98c97a;
        }

        .cm {
            color: #3e4860;
            font-style: italic;
        }

        .cm.hi {
            color: #546080;
        }

        .num {
            color: #f0a070;
        }

        .macro {
            color: #d08eff;
        }

        .op {
            color: #7c9eff;
        }

        /* â”€â”€ Result box â”€â”€ */
        .result-box {
            display: flex;
            gap: .8rem;
            align-items: flex-start;
            padding: 1rem 1.2rem;
            border-radius: 6px;
            border: 1px solid;
            margin: 1rem 0;
            font-family: var(--mono);
            font-size: .82rem;
        }

        .result-box.fail {
            background: var(--red-dim);
            border-color: #5a2020;
            color: #ff9090;
        }

        .result-box.pass {
            background: var(--green-dim);
            border-color: #1a5a2a;
            color: #80ffb0;
        }

        .result-box.note {
            background: var(--blue-dim);
            border-color: #1a3060;
            color: #90b8ff;
        }

        .result-icon {
            font-size: 1rem;
            flex-shrink: 0;
            margin-top: .1rem;
        }

        /* â”€â”€ Explanation cards â”€â”€ */
        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 1.2rem 1.4rem;
        }

        .card-title {
            font-weight: 700;
            color: var(--text-bright);
            margin-bottom: .5rem;
            font-size: .9rem;
        }

        .card p {
            font-size: .85rem;
            color: var(--text-dim);
            line-height: 1.7;
        }

        .card code {
            font-family: var(--mono);
            font-size: .78rem;
            color: var(--amber);
        }

        /* â”€â”€ Progress bar â”€â”€ */
        .progress {
            display: flex;
            gap: .4rem;
            margin-bottom: 2rem;
            align-items: center;
        }

        .progress-seg {
            height: 4px;
            flex: 1;
            border-radius: 2px;
            background: var(--border);
            transition: background .3s;
        }

        .progress-seg.done-red {
            background: var(--red);
        }

        .progress-seg.done-green {
            background: var(--green);
        }

        .progress-seg.done-amber {
            background: var(--amber);
        }

        .progress-seg.done-blue {
            background: var(--blue);
        }

        .progress-label {
            font-family: var(--mono);
            font-size: .7rem;
            color: var(--text-dim);
            flex-shrink: 0;
        }

        /* â”€â”€ Bottom nav â”€â”€ */
        .step-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 2.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
        }

        .btn {
            font-family: var(--mono);
            font-size: .8rem;
            font-weight: 600;
            padding: .7rem 1.4rem;
            border: 1px solid var(--border);
            border-radius: 4px;
            cursor: pointer;
            background: var(--surface);
            color: var(--text);
            transition: all .2s;
            letter-spacing: .03em;
        }

        .btn:hover {
            border-color: var(--blue);
            color: var(--blue);
        }

        .btn.primary {
            background: var(--blue-dim);
            border-color: var(--blue);
            color: var(--blue);
        }

        .btn:disabled {
            opacity: .3;
            cursor: default;
        }

        /* â”€â”€ Inline highlight â”€â”€ */
        .hl {
            background: #1e2a1e;
            border: 1px solid #2a4a2a;
            border-radius: 3px;
            padding: .1rem .4rem;
            font-family: var(--mono);
            font-size: .8rem;
            color: var(--green);
        }

        .hl.r {
            background: #2a1a1a;
            border-color: #4a2020;
            color: var(--red);
        }

        .hl.a {
            background: #2a2010;
            border-color: #4a3a10;
            color: var(--amber);
        }

        /* â”€â”€ final full code â”€â”€ */
        .full-code-label {
            font-family: var(--mono);
            font-size: .7rem;
            color: var(--blue);
            text-transform: uppercase;
            letter-spacing: .08em;
            margin-bottom: .5rem;
        }

        hr.dim {
            border: none;
            border-top: 1px solid var(--border);
            margin: 1.5rem 0;
        }
    </style>
</head>

<body>

    <header>
        <div>
            <h1>TDD å®ç° <em>MRUList</em></h1>
        </div>
        <div class="tdd-cycle">
            <span class="r">Red</span>
            <span class="arr">â†’</span>
            <span class="g">Green</span>
            <span class="arr">â†’</span>
            <span class="rf">Refactor</span>
            <span class="arr">â†’ ...</span>
        </div>
    </header>

    <nav>
        <button class="active" onclick="goto(0)">â‘  åˆå§‹çŠ¶æ€ <span class="badge r-badge">RED</span></button>
        <button onclick="goto(1)">â‘¡ æœ€å°å®ç° <span class="badge g-badge">GREEN</span></button>
        <button onclick="goto(2)">â‘¢ æ·»åŠ è¡Œä¸º <span class="badge r-badge">RED</span></button>
        <button onclick="goto(3)">â‘£ å®ç° add() <span class="badge g-badge">GREEN</span></button>
        <button onclick="goto(4)">â‘¤ æ›´å¤šæµ‹è¯• <span class="badge r-badge">RED</span></button>
        <button onclick="goto(5)">â‘¥ å®Œæ•´å®ç° <span class="badge g-badge">GREEN</span></button>
        <button onclick="goto(6)">â‘¦ é‡æ„ <span class="badge rf-badge">REFACTOR</span></button>
        <button onclick="goto(7)">â‘§ å®Œæ•´ä»£ç  <span class="badge"
                style="background:#1a3060;color:#5b8fff">FINAL</span></button>
    </nav>

    <main>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STEP 0 -->
        <div class="step active" id="step-0">
            <div class="progress">
                <span class="progress-label">1 / 8</span>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
            </div>

            <div class="step-header">
                <div class="phase-pill red">ğŸ”´ Red</div>
                <div>
                    <div class="step-title">å†™ç¬¬ä¸€ä¸ªå¤±è´¥çš„æµ‹è¯•ï¼šç©ºåˆ—è¡¨åˆå§‹çŠ¶æ€</div>
                    <div class="step-desc">å…ˆåªå†™æµ‹è¯•ï¼Œæ­¤æ—¶ MRUList æ ¹æœ¬ä¸å­˜åœ¨ â€”â€” ç¼–è¯‘å¿…ç„¶å¤±è´¥ï¼Œè¿™æ­£æ˜¯ Red é˜¶æ®µçš„ç›®æ ‡ã€‚</div>
                </div>
            </div>

            <div class="code-wrap">
                <div class="code-label">
                    <div class="dot dot-red"></div>test_mrulist.cpp â€” åªæœ‰æµ‹è¯•ï¼Œæ²¡æœ‰å®ç°
                </div>
                <pre><span class="cm">// â¶ åªå¼•å…¥æµ‹è¯•æ¡†æ¶ï¼Œä¸å¼•å…¥ä»»ä½•å®ç°</span>
<span class="macro">#include</span> <span class="str">&lt;catch2/catch_test_macros.hpp&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;catch2/catch_session.hpp&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;string&gt;</span>

<span class="cm">// â· MRUList è¿˜ä¸å­˜åœ¨ï¼è¿™é‡Œä¼šç¼–è¯‘å¤±è´¥ âœ—</span>
<span class="macro">TEST_CASE</span>(<span class="str">"An MRU list acts like a stack, "</span>
          <span class="str">"but duplicate entries replace existing ones"</span>)
{
    <span class="cm">// Arrange</span>
    <span class="ty">MRUList</span>&lt;<span class="ty">std::string</span>&gt; list;

    <span class="macro">SECTION</span>(<span class="str">"An empty list has no elements"</span>)
    {
        <span class="cm">// Assert â€” éªŒè¯åˆå§‹çŠ¶æ€</span>
        <span class="macro">REQUIRE</span>( list.empty() );          <span class="cm">// âœ— ç¼–è¯‘å¤±è´¥ï¼šMRUList æœªå®šä¹‰</span>
        <span class="macro">REQUIRE</span>( list.size() == <span class="num">0</span> );      <span class="cm">// âœ—</span>
    }
}

<span class="kw">int</span> <span class="fn">main</span>(<span class="kw">int</span> argc, <span class="kw">char</span>* argv[]) {
    <span class="kw">return</span> <span class="ty">Catch</span>::<span class="fn">Session</span>().<span class="fn">run</span>(argc, argv);
}</pre>
            </div>

            <div class="result-box fail">
                <div class="result-icon">âœ—</div>
                <div><strong>ç¼–è¯‘å¤±è´¥ï¼ˆé¢„æœŸï¼‰</strong><br>
                    error: 'MRUList' was not declared in this scope<br>
                    <br>â†’ å¤±è´¥è¯æ˜æµ‹è¯•æœ‰æ•ˆã€‚è¿™æ­£æ˜¯ Red é˜¶æ®µçš„ç›®çš„ã€‚
                </div>
            </div>

            <div class="cards">
                <div class="card">
                    <div class="card-title">ä¸ºä»€ä¹ˆè¦å…ˆå¤±è´¥ï¼Ÿ</div>
                    <p>å¤±è´¥è¯´æ˜æµ‹è¯•æ˜¯"æ´»çš„"â€”â€”å®ƒçœŸçš„åœ¨æ£€éªŒæŸä¸ªå°šä¸å­˜åœ¨çš„è¡Œä¸ºã€‚å¦‚æœæµ‹è¯•ä¸å¤±è´¥ï¼Œè¯´æ˜æµ‹è¯•æ ¹æœ¬æ²¡æœ‰éªŒè¯ä»»ä½•ä¸œè¥¿ã€‚</p>
                </div>
                <div class="card">
                    <div class="card-title">æ­¤é˜¶æ®µæˆ‘ä»¬çŸ¥é“äº†ä»€ä¹ˆï¼Ÿ</div>
                    <p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ª <code>MRUList&lt;T&gt;</code> æ¨¡æ¿ç±»ï¼Œå®ƒè¦æœ‰ <code>empty()</code> å’Œ <code>size()</code> ä¸¤ä¸ªæ–¹æ³•ã€‚</p>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STEP 1 -->
        <div class="step" id="step-1">
            <div class="progress">
                <span class="progress-label">2 / 8</span>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
            </div>

            <div class="step-header">
                <div class="phase-pill green">ğŸŸ¢ Green</div>
                <div>
                    <div class="step-title">å†™æœ€å°‘ä»£ç è®© SECTION 1 é€šè¿‡</div>
                    <div class="step-desc">Race to Green â€”â€” ä¸è¿½æ±‚å®Œç¾ï¼Œåªè®©æµ‹è¯•é€šè¿‡ã€‚ç”¨æœ€å°éª¨æ¶å®ç° empty() å’Œ size()ã€‚</div>
                </div>
            </div>

            <div class="code-wrap">
                <div class="code-label">
                    <div class="dot dot-green"></div>MRUList.h â€” æœ€å°å®ç°ï¼ˆä½œå¼Šå¼ï¼‰
                </div>
                <pre><span class="macro">#pragma once</span>
<span class="macro">#include</span> <span class="str">&lt;cstddef&gt;</span>

<span class="kw">template</span>&lt;<span class="kw">typename</span> <span class="ty">T</span>&gt;
<span class="kw">class</span> <span class="ty">MRUList</span> {
<span class="kw">public</span>:
    <span class="cm">// âœ“ empty() å§‹ç»ˆè¿”å› true â€” åªä¸ºé€šè¿‡å½“å‰æµ‹è¯•</span>
    <span class="kw">bool</span> <span class="fn">empty</span>() <span class="kw">const</span> { <span class="kw">return</span> <span class="kw">true</span>; }

    <span class="cm">// âœ“ size() å§‹ç»ˆè¿”å› 0 â€” åªä¸ºé€šè¿‡å½“å‰æµ‹è¯•</span>
    <span class="ty">std::size_t</span> <span class="fn">size</span>() <span class="kw">const</span> { <span class="kw">return</span> <span class="num">0</span>; }
};</pre>
            </div>

            <div class="result-box pass">
                <div class="result-icon">âœ“</div>
                <div><strong>SECTION 1 é€šè¿‡</strong><br>
                    All tests passed (1 assertion in 1 test case)<br>
                    <br>â†’ è™½ç„¶å®ç°æ˜¯å‡çš„ï¼Œä½†æµ‹è¯•é€šè¿‡äº†ã€‚Green é˜¶æ®µå®Œæˆã€‚
                </div>
            </div>

            <div class="result-box note">
                <div class="result-icon">ğŸ’¡</div>
                <div><strong>ä¸ºä»€ä¹ˆå…è®¸"ä½œå¼Š"ï¼Ÿ</strong><br>
                    Kent Beck åŸåˆ™ï¼šMake it work â†’ Make it right â†’ Make it fast<br>
                    ç°åœ¨æˆ‘ä»¬åœ¨ "Make it work"ã€‚æ­£ç¡®æ€§ç•™ç»™é‡æ„é˜¶æ®µã€‚</div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STEP 2 -->
        <div class="step" id="step-2">
            <div class="progress">
                <span class="progress-label">3 / 8</span>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
            </div>

            <div class="step-header">
                <div class="phase-pill red">ğŸ”´ Red</div>
                <div>
                    <div class="step-title">åŠ å…¥ SECTION 2ï¼šæ·»åŠ å…ƒç´ çš„æµ‹è¯•</div>
                    <div class="step-desc">æ–°éœ€æ±‚ â†’ æ–°æµ‹è¯• â†’ å¿…é¡»å…ˆå¤±è´¥ã€‚add() æ–¹æ³•è¿˜ä¸å­˜åœ¨ã€‚</div>
                </div>
            </div>

            <div class="code-wrap">
                <div class="code-label">
                    <div class="dot dot-red"></div>test_mrulist.cpp â€” åŠ å…¥ SECTION 2
                </div>
                <pre><span class="macro">TEST_CASE</span>(<span class="str">"An MRU list acts like a stack, "</span>
          <span class="str">"but duplicate entries replace existing ones"</span>)
{
    <span class="ty">MRUList</span>&lt;<span class="ty">std::string</span>&gt; list;

    <span class="macro">SECTION</span>(<span class="str">"An empty list has no elements"</span>)
    {
        <span class="macro">REQUIRE</span>( list.empty() );          <span class="cm">// âœ“ ä»ç„¶é€šè¿‡</span>
        <span class="macro">REQUIRE</span>( list.size() == <span class="num">0</span> );      <span class="cm">// âœ“ ä»ç„¶é€šè¿‡</span>
    }

    <span class="cm hi">// â•â• æ–°å¢ SECTION 2 â•â•</span>
    <span class="macro">SECTION</span>(<span class="str">"Adding to an empty list increases the size to 1"</span>)
    {
        <span class="cm">// Act</span>
        list.<span class="fn">add</span>(<span class="str">"item1"</span>);              <span class="cm">// âœ— add() ä¸å­˜åœ¨ï¼Œç¼–è¯‘å¤±è´¥</span>

        <span class="cm">// Assert</span>
        <span class="macro">REQUIRE</span>( list.empty() == <span class="kw">false</span> );
        <span class="macro">REQUIRE</span>( list.size() == <span class="num">1</span> );
    }
}</pre>
            </div>

            <div class="result-box fail">
                <div class="result-icon">âœ—</div>
                <div><strong>ç¼–è¯‘å¤±è´¥ï¼ˆé¢„æœŸï¼‰</strong><br>
                    error: 'class MRUList&lt;std::string&gt;' has no member named 'add'<br>
                    <br>â†’ çº¢ç¯ã€‚æˆ‘ä»¬çŸ¥é“ä¸‹ä¸€æ­¥è¯¥åšä»€ä¹ˆäº†ã€‚
                </div>
            </div>

            <div class="cards">
                <div class="card">
                    <div class="card-title">Catch2 çš„ SECTION æ‰§è¡Œæ¨¡å‹</div>
                    <p>æ¯ä¸ª SECTION éƒ½æ˜¯ç‹¬ç«‹æ‰§è¡Œè·¯å¾„ã€‚Catch2 ä¼šæ‰§è¡Œ TEST_CASE ä¸¤æ¬¡ï¼šç¬¬ä¸€æ¬¡åªè¿› SECTION 1ï¼Œç¬¬äºŒæ¬¡åªè¿› SECTION 2ã€‚ä¸¤æ¬¡éƒ½ä»å¤´
                        <code>MRUList list;</code> å¼€å§‹ï¼ŒçŠ¶æ€å®Œå…¨éš”ç¦»ã€‚
                    </p>
                </div>
                <div class="card">
                    <div class="card-title">æ–°æµ‹è¯•å‘Šè¯‰æˆ‘ä»¬ä»€ä¹ˆï¼Ÿ</div>
                    <p>æˆ‘ä»¬éœ€è¦ <code>add(T value)</code> æ–¹æ³•ï¼Œè°ƒç”¨å <code>empty()</code> è¿”å›
                        <code>false</code>ï¼Œ<code>size()</code> è¿”å› <code>1</code>ã€‚å†…éƒ¨éœ€è¦çœŸæ­£çš„å­˜å‚¨äº†ã€‚
                    </p>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STEP 3 -->
        <div class="step" id="step-3">
            <div class="progress">
                <span class="progress-label">4 / 8</span>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
            </div>

            <div class="step-header">
                <div class="phase-pill green">ğŸŸ¢ Green</div>
                <div>
                    <div class="step-title">å®ç° add()ï¼Œè®© SECTION 2 é€šè¿‡</div>
                    <div class="step-desc">å¼•å…¥çœŸæ­£çš„å†…éƒ¨å­˜å‚¨ï¼Œè®© empty() å’Œ size() åŸºäºå®é™…æ•°æ®è¿”å›ã€‚</div>
                </div>
            </div>

            <div class="code-wrap">
                <div class="code-label">
                    <div class="dot dot-green"></div>MRUList.h â€” å¼•å…¥çœŸæ­£çš„å­˜å‚¨
                </div>
                <pre><span class="macro">#pragma once</span>
<span class="macro">#include</span> <span class="str">&lt;vector&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;cstddef&gt;</span>

<span class="kw">template</span>&lt;<span class="kw">typename</span> <span class="ty">T</span>&gt;
<span class="kw">class</span> <span class="ty">MRUList</span> {
<span class="kw">public</span>:
    <span class="cm">// âœ“ å§”æ‰˜ç»™å†…éƒ¨ vector</span>
    <span class="kw">bool</span> <span class="fn">empty</span>() <span class="kw">const</span> { <span class="kw">return</span> items_.empty(); }
    <span class="ty">std::size_t</span> <span class="fn">size</span>() <span class="kw">const</span> { <span class="kw">return</span> items_.size(); }

    <span class="cm">// âœ“ æ–°å¢ add()ï¼šæŠŠå…ƒç´ æ’åˆ°æœ€å‰é¢ï¼ˆMRU è¯­ä¹‰ï¼šæœ€è¿‘ä½¿ç”¨ = æ ˆé¡¶ï¼‰</span>
    <span class="kw">void</span> <span class="fn">add</span>(<span class="ty">T</span> value) {
        items_.insert(items_.begin(), value);
    }

<span class="kw">private</span>:
    <span class="ty">std::vector</span>&lt;<span class="ty">T</span>&gt; items_;    <span class="cm">// å†…éƒ¨å­˜å‚¨</span>
};</pre>
            </div>

            <div class="result-box pass">
                <div class="result-icon">âœ“</div>
                <div><strong>ä¸¤ä¸ª SECTION å…¨éƒ¨é€šè¿‡</strong><br>
                    All tests passed (4 assertions in 1 test case)<br>
                    <br>â†’ ç»¿ç¯ã€‚ä¸¤æ¡éœ€æ±‚éƒ½éªŒè¯é€šè¿‡äº†ã€‚
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STEP 4 -->
        <div class="step" id="step-4">
            <div class="progress">
                <span class="progress-label">5 / 8</span>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
            </div>

            <div class="step-header">
                <div class="phase-pill red">ğŸ”´ Red</div>
                <div>
                    <div class="step-title">æ›´å¤šæµ‹è¯•ï¼šMRU é¡ºåº + å»é‡è¡Œä¸º</div>
                    <div class="step-desc">MRU çš„æ ¸å¿ƒè¯­ä¹‰ï¼šæœ€è¿‘æ·»åŠ çš„æ’æœ€å‰ï¼›é‡å¤å…ƒç´ æ›¿æ¢ï¼ˆç§»åˆ°æœ€å‰ï¼‰ï¼Œä¸å¢åŠ  sizeã€‚</div>
                </div>
            </div>

            <div class="code-wrap">
                <div class="code-label">
                    <div class="dot dot-red"></div>test_mrulist.cpp â€” å®Œæ•´æµ‹è¯•ç”¨ä¾‹
                </div>
                <pre><span class="macro">TEST_CASE</span>(<span class="str">"An MRU list acts like a stack, "</span>
          <span class="str">"but duplicate entries replace existing ones"</span>)
{
    <span class="ty">MRUList</span>&lt;<span class="ty">std::string</span>&gt; list;

    <span class="macro">SECTION</span>(<span class="str">"An empty list has no elements"</span>) { <span class="cm">/* ... âœ“ */</span> }
    <span class="macro">SECTION</span>(<span class="str">"Adding to an empty list increases the size to 1"</span>) { <span class="cm">/* ... âœ“ */</span> }

    <span class="cm hi">// â•â• æ–°å¢ï¼šMRU é¡ºåºéªŒè¯ â•â•</span>
    <span class="macro">SECTION</span>(<span class="str">"Most recently added item is first"</span>)
    {
        list.<span class="fn">add</span>(<span class="str">"item1"</span>);
        list.<span class="fn">add</span>(<span class="str">"item2"</span>);
        list.<span class="fn">add</span>(<span class="str">"item3"</span>);

        <span class="macro">REQUIRE</span>( list.<span class="fn">top</span>() == <span class="str">"item3"</span> );  <span class="cm">// âœ— top() è¿˜ä¸å­˜åœ¨</span>
        <span class="macro">REQUIRE</span>( list.<span class="fn">size</span>() == <span class="num">3</span> );
    }

    <span class="cm hi">// â•â• æ–°å¢ï¼šå»é‡ï¼ˆæ ¸å¿ƒ MRU è¯­ä¹‰ï¼‰â•â•</span>
    <span class="macro">SECTION</span>(<span class="str">"Adding a duplicate moves it to the front, not increases size"</span>)
    {
        list.<span class="fn">add</span>(<span class="str">"item1"</span>);
        list.<span class="fn">add</span>(<span class="str">"item2"</span>);
        list.<span class="fn">add</span>(<span class="str">"item1"</span>);    <span class="cm">// é‡å¤ï¼</span>

        <span class="macro">REQUIRE</span>( list.<span class="fn">size</span>() == <span class="num">2</span> );          <span class="cm">// âœ— size åº”è¯¥æ˜¯ 2 ä¸æ˜¯ 3</span>
        <span class="macro">REQUIRE</span>( list.<span class="fn">top</span>() == <span class="str">"item1"</span> );    <span class="cm">// âœ— item1 åº”è¯¥ç§»åˆ°æœ€å‰</span>
    }

    <span class="cm hi">// â•â• æ–°å¢ï¼šç´¢å¼•è®¿é—® â•â•</span>
    <span class="macro">SECTION</span>(<span class="str">"Elements can be accessed by index"</span>)
    {
        list.<span class="fn">add</span>(<span class="str">"a"</span>);
        list.<span class="fn">add</span>(<span class="str">"b"</span>);
        list.<span class="fn">add</span>(<span class="str">"c"</span>);

        <span class="macro">REQUIRE</span>( list[<span class="num">0</span>] == <span class="str">"c"</span> );    <span class="cm">// âœ— operator[] è¿˜ä¸å­˜åœ¨</span>
        <span class="macro">REQUIRE</span>( list[<span class="num">1</span>] == <span class="str">"b"</span> );
        <span class="macro">REQUIRE</span>( list[<span class="num">2</span>] == <span class="str">"a"</span> );
    }
}</pre>
            </div>

            <div class="result-box fail">
                <div class="result-icon">âœ—</div>
                <div><strong>3 ä¸ªæ–° SECTION å¤±è´¥ï¼ˆé¢„æœŸï¼‰</strong><br>
                    error: 'class MRUList' has no member named 'top'<br>
                    error: no match for 'operator[]'<br>
                    å»é‡é€»è¾‘å°šæœªå®ç°<br>
                    <br>â†’ è¿™äº›æµ‹è¯•ç²¾ç¡®å®šä¹‰äº† MRUList çš„è¡Œä¸ºè§„èŒƒã€‚
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STEP 5 -->
        <div class="step" id="step-5">
            <div class="progress">
                <span class="progress-label">6 / 8</span>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg"></div>
                <div class="progress-seg"></div>
            </div>

            <div class="step-header">
                <div class="phase-pill green">ğŸŸ¢ Green</div>
                <div>
                    <div class="step-title">å®ç° top()ã€operator[]ã€å»é‡é€»è¾‘</div>
                    <div class="step-desc">è®©æ‰€æœ‰æµ‹è¯•é€šè¿‡ã€‚add() éœ€è¦å…ˆæŸ¥æ‰¾å¹¶åˆ é™¤é‡å¤é¡¹ï¼Œå†æ’å…¥åˆ°å¤´éƒ¨ã€‚</div>
                </div>
            </div>

            <div class="code-wrap">
                <div class="code-label">
                    <div class="dot dot-green"></div>MRUList.h â€” å®Œæ•´åŠŸèƒ½å®ç°
                </div>
                <pre><span class="macro">#pragma once</span>
<span class="macro">#include</span> <span class="str">&lt;vector&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;algorithm&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;cstddef&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;stdexcept&gt;</span>

<span class="kw">template</span>&lt;<span class="kw">typename</span> <span class="ty">T</span>&gt;
<span class="kw">class</span> <span class="ty">MRUList</span> {
<span class="kw">public</span>:
    <span class="cm">// â”€â”€â”€ çŠ¶æ€æŸ¥è¯¢ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="kw">bool</span>         <span class="fn">empty</span>() <span class="kw">const</span> { <span class="kw">return</span> items_.empty(); }
    <span class="ty">std::size_t</span>  <span class="fn">size</span>()  <span class="kw">const</span> { <span class="kw">return</span> items_.size(); }

    <span class="cm">// â”€â”€â”€ æœ€è¿‘ä½¿ç”¨é¡¹ï¼ˆæ ˆé¡¶ï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="kw">const</span> <span class="ty">T</span>&amp; <span class="fn">top</span>() <span class="kw">const</span> {
        <span class="kw">if</span> (items_.empty())
            <span class="kw">throw</span> <span class="ty">std::out_of_range</span>(<span class="str">"MRUList is empty"</span>);
        <span class="kw">return</span> items_.front();   <span class="cm">// æœ€è¿‘ä½¿ç”¨ = index 0</span>
    }

    <span class="cm">// â”€â”€â”€ æŒ‰ä½ç½®è®¿é—® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="kw">const</span> <span class="ty">T</span>&amp; <span class="kw">operator</span>[](<span class="ty">std::size_t</span> index) <span class="kw">const</span> {
        <span class="kw">return</span> items_.at(index);
    }

    <span class="cm">// â”€â”€â”€ æ·»åŠ ï¼ˆæ ¸å¿ƒ MRU é€»è¾‘ï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="kw">void</span> <span class="fn">add</span>(<span class="ty">T</span> value) {
        <span class="cm">// â‘  å…ˆæŸ¥æ‰¾é‡å¤é¡¹</span>
        <span class="kw">auto</span> it = <span class="ty">std</span>::<span class="fn">find</span>(items_.begin(), items_.end(), value);

        <span class="cm">// â‘¡ å¦‚æœå­˜åœ¨ï¼Œå…ˆåˆ é™¤ï¼ˆä¸å¢åŠ  sizeï¼‰</span>
        <span class="kw">if</span> (it != items_.end()) {
            items_.erase(it);
        }

        <span class="cm">// â‘¢ æ’å…¥åˆ°æœ€å‰é¢ï¼ˆæœ€è¿‘ä½¿ç”¨ = æ ˆé¡¶ï¼‰</span>
        items_.insert(items_.begin(), <span class="ty">std</span>::<span class="fn">move</span>(value));
    }

<span class="kw">private</span>:
    <span class="ty">std::vector</span>&lt;<span class="ty">T</span>&gt; items_;
};</pre>
            </div>

            <div class="result-box pass">
                <div class="result-icon">âœ“</div>
                <div><strong>å…¨éƒ¨æµ‹è¯•é€šè¿‡</strong><br>
                    All tests passed (11 assertions in 1 test case)<br>
                    <br>â†’ ç»¿ç¯ã€‚æ‰€æœ‰è¡Œä¸ºè§„èŒƒéƒ½æ»¡è¶³äº†ã€‚
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STEP 6 -->
        <div class="step" id="step-6">
            <div class="progress">
                <span class="progress-label">7 / 8</span>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg done-amber"></div>
                <div class="progress-seg"></div>
            </div>

            <div class="step-header">
                <div class="phase-pill refactor">ğŸŸ¡ Refactor</div>
                <div>
                    <div class="step-title">é‡æ„ï¼šæå‡æ€§èƒ½ä¸æ¸…æ™°åº¦</div>
                    <div class="step-desc">è¡Œä¸ºä¸å˜ï¼Œç»“æ„æ›´å¥½ã€‚ç”¨ std::list æ›¿æ¢ vector ä»¥ä¼˜åŒ–å¤´éƒ¨æ’å…¥ï¼›æŠ½å–è¾…åŠ©æ–¹æ³•ï¼›åŠ å¼ºæ¥å£ã€‚</div>
                </div>
            </div>

            <div class="code-wrap">
                <div class="code-label">
                    <div class="dot dot-amber"></div>MRUList.h â€” é‡æ„åï¼ˆè¡Œä¸ºå®Œå…¨ä¸€è‡´ï¼‰
                </div>
                <pre><span class="macro">#pragma once</span>
<span class="macro">#include</span> <span class="str">&lt;list&gt;</span>        <span class="cm">// æ›¿æ¢ vectorï¼šå¤´éƒ¨æ’å…¥ O(1)</span>
<span class="macro">#include</span> <span class="str">&lt;algorithm&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;cstddef&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;stdexcept&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;iterator&gt;</span>

<span class="kw">template</span>&lt;<span class="kw">typename</span> <span class="ty">T</span>&gt;
<span class="kw">class</span> <span class="ty">MRUList</span> {
<span class="kw">public</span>:
    <span class="cm">// â”€â”€â”€ ç±»å‹åˆ«åï¼ˆå¢å¼ºå¯è¯»æ€§ï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="kw">using</span> value_type      = <span class="ty">T</span>;
    <span class="kw">using</span> size_type       = <span class="ty">std::size_t</span>;
    <span class="kw">using</span> const_reference = <span class="kw">const</span> <span class="ty">T</span>&amp;;

    <span class="cm">// â”€â”€â”€ çŠ¶æ€æŸ¥è¯¢ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="kw">bool</span>      <span class="fn">empty</span>() <span class="kw">const</span> noexcept { <span class="kw">return</span> items_.empty(); }
    size_type <span class="fn">size</span>()  <span class="kw">const</span> noexcept { <span class="kw">return</span> items_.size(); }

    <span class="cm">// â”€â”€â”€ è®¿é—®æœ€è¿‘ä½¿ç”¨é¡¹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    const_reference <span class="fn">top</span>() <span class="kw">const</span> {
        <span class="fn">throw_if_empty</span>();
        <span class="kw">return</span> items_.front();
    }

    <span class="cm">// â”€â”€â”€ æŒ‰ä½ç½®è®¿é—®ï¼ˆO(n)ï¼Œlist ç‰¹æ€§ï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    const_reference <span class="kw">operator</span>[](size_type index) <span class="kw">const</span> {
        <span class="kw">if</span> (index >= items_.size())
            <span class="kw">throw</span> <span class="ty">std::out_of_range</span>(<span class="str">"MRUList index out of range"</span>);
        <span class="kw">auto</span> it = items_.begin();
        <span class="ty">std</span>::<span class="fn">advance</span>(it, index);
        <span class="kw">return</span> *it;
    }

    <span class="cm">// â”€â”€â”€ æ ¸å¿ƒï¼šæ·»åŠ ï¼ˆå…ˆå»é‡ï¼Œå†æ’åˆ°å¤´éƒ¨ï¼‰â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="kw">void</span> <span class="fn">add</span>(value_type value) {
        <span class="fn">remove_if_exists</span>(value);
        items_.push_front(<span class="ty">std</span>::<span class="fn">move</span>(value));   <span class="cm">// O(1)</span>
    }

    <span class="cm">// â”€â”€â”€ è¿­ä»£å™¨æ”¯æŒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="kw">auto</span> <span class="fn">begin</span>() <span class="kw">const</span> { <span class="kw">return</span> items_.begin(); }
    <span class="kw">auto</span> <span class="fn">end</span>()   <span class="kw">const</span> { <span class="kw">return</span> items_.end(); }

<span class="kw">private</span>:
    <span class="ty">std::list</span>&lt;<span class="ty">T</span>&gt; items_;

    <span class="kw">void</span> <span class="fn">throw_if_empty</span>() <span class="kw">const</span> {
        <span class="kw">if</span> (items_.empty())
            <span class="kw">throw</span> <span class="ty">std::out_of_range</span>(<span class="str">"MRUList is empty"</span>);
    }

    <span class="kw">void</span> <span class="fn">remove_if_exists</span>(<span class="kw">const</span> value_type&amp; value) {
        <span class="kw">auto</span> it = <span class="ty">std</span>::<span class="fn">find</span>(items_.begin(), items_.end(), value);
        <span class="kw">if</span> (it != items_.end()) items_.erase(it);
    }
};</pre>
            </div>

            <div class="result-box pass">
                <div class="result-icon">âœ“</div>
                <div><strong>é‡æ„åæ‰€æœ‰æµ‹è¯•ä»ç„¶é€šè¿‡</strong><br>
                    All tests passed (11 assertions in 1 test case)<br>
                    <br>â†’ è¡Œä¸ºä¸å˜ï¼Œç»“æ„æ›´ä¼˜ã€‚è¿™æ­£æ˜¯ Refactor é˜¶æ®µçš„æ„ä¹‰ã€‚
                </div>
            </div>

            <div class="cards">
                <div class="card">
                    <div class="card-title">é‡æ„æ”¹åŠ¨äº†ä»€ä¹ˆï¼Ÿ</div>
                    <p>vector â†’ listï¼Œå¤´éƒ¨æ’å…¥ä» O(n) å˜ä¸º O(1)ï¼›æŠ½å–äº† <code>throw_if_empty()</code> å’Œ
                        <code>remove_if_exists()</code> ä¸¤ä¸ªç§æœ‰æ–¹æ³•ï¼›åŠ äº†ç±»å‹åˆ«åï¼›åŠ äº† noexceptã€‚
                    </p>
                </div>
                <div class="card">
                    <div class="card-title">é‡æ„æ²¡æœ‰æ”¹å˜ä»€ä¹ˆï¼Ÿ</div>
                    <p>æ‰€æœ‰å…¬å¼€æ¥å£è¡Œä¸ºå®Œå…¨ä¸€è‡´ã€‚æµ‹è¯•æ˜¯"å®‰å…¨ç½‘"â€”â€”åªè¦æµ‹è¯•å…¨ç»¿ï¼Œé‡æ„å°±æ˜¯å®‰å…¨çš„ã€‚</p>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STEP 7 -->
        <div class="step" id="step-7">
            <div class="progress">
                <span class="progress-label">8 / 8</span>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg done-red"></div>
                <div class="progress-seg done-green"></div>
                <div class="progress-seg done-amber"></div>
                <div class="progress-seg done-blue"></div>
            </div>

            <div class="step-header">
                <div class="phase-pill final">âœ… Final</div>
                <div>
                    <div class="step-title">å®Œæ•´ä»£ç ï¼ˆå¯ç›´æ¥ç¼–è¯‘è¿è¡Œï¼‰</div>
                    <div class="step-desc">ä¸¤ä¸ªæ–‡ä»¶ï¼šMRUList.hï¼ˆå®ç°ï¼‰+ test_mrulist.cppï¼ˆå®Œæ•´æµ‹è¯•ï¼‰ã€‚</div>
                </div>
            </div>

            <div class="full-code-label">ğŸ“„ MRUList.h</div>
            <div class="code-wrap">
                <div class="code-label">
                    <div class="dot dot-green"></div>MRUList.h â€” å®Œæ•´å¤´æ–‡ä»¶
                </div>
                <pre><span class="macro">#pragma once</span>
<span class="macro">#include</span> <span class="str">&lt;list&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;algorithm&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;cstddef&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;stdexcept&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;iterator&gt;</span>

<span class="cm">/// MRUï¼ˆæœ€è¿‘ä½¿ç”¨ï¼‰åˆ—è¡¨</span>
<span class="cm">/// è¯­ä¹‰ï¼š</span>
<span class="cm">///   - æœ€è¿‘ add çš„å…ƒç´ æ’åœ¨æœ€å‰ï¼ˆindex 0ï¼‰</span>
<span class="cm">///   - é‡å¤å…ƒç´ ä¸ä¼šå¢åŠ  sizeï¼Œè€Œæ˜¯ç§»åˆ°æœ€å‰</span>
<span class="kw">template</span>&lt;<span class="kw">typename</span> <span class="ty">T</span>&gt;
<span class="kw">class</span> <span class="ty">MRUList</span> {
<span class="kw">public</span>:
    <span class="kw">using</span> value_type      = <span class="ty">T</span>;
    <span class="kw">using</span> size_type       = <span class="ty">std::size_t</span>;
    <span class="kw">using</span> const_reference = <span class="kw">const</span> <span class="ty">T</span>&amp;;

    <span class="cm">// â”€â”€ å®¹é‡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="kw">bool</span>      <span class="fn">empty</span>() <span class="kw">const</span> noexcept { <span class="kw">return</span> items_.empty(); }
    size_type <span class="fn">size</span>()  <span class="kw">const</span> noexcept { <span class="kw">return</span> items_.size(); }

    <span class="cm">// â”€â”€ å…ƒç´ è®¿é—® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    const_reference <span class="fn">top</span>() <span class="kw">const</span> {
        <span class="fn">throw_if_empty</span>();
        <span class="kw">return</span> items_.front();
    }

    const_reference <span class="kw">operator</span>[](size_type index) <span class="kw">const</span> {
        <span class="kw">if</span> (index >= items_.size())
            <span class="kw">throw</span> <span class="ty">std::out_of_range</span>(<span class="str">"MRUList: index out of range"</span>);
        <span class="kw">auto</span> it = items_.cbegin();
        <span class="ty">std</span>::<span class="fn">advance</span>(it, index);
        <span class="kw">return</span> *it;
    }

    <span class="cm">// â”€â”€ ä¿®æ”¹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="kw">void</span> <span class="fn">add</span>(value_type value) {
        <span class="fn">remove_if_exists</span>(value);
        items_.push_front(<span class="ty">std</span>::<span class="fn">move</span>(value));
    }

    <span class="cm">// â”€â”€ è¿­ä»£å™¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="kw">auto</span> <span class="fn">begin</span>() <span class="kw">const</span> noexcept { <span class="kw">return</span> items_.cbegin(); }
    <span class="kw">auto</span> <span class="fn">end</span>()   <span class="kw">const</span> noexcept { <span class="kw">return</span> items_.cend(); }

<span class="kw">private</span>:
    <span class="ty">std::list</span>&lt;<span class="ty">T</span>&gt; items_;

    <span class="kw">void</span> <span class="fn">throw_if_empty</span>() <span class="kw">const</span> {
        <span class="kw">if</span> (items_.empty())
            <span class="kw">throw</span> <span class="ty">std::out_of_range</span>(<span class="str">"MRUList is empty"</span>);
    }

    <span class="kw">void</span> <span class="fn">remove_if_exists</span>(<span class="kw">const</span> value_type&amp; value) {
        <span class="kw">auto</span> it = <span class="ty">std</span>::<span class="fn">find</span>(items_.begin(), items_.end(), value);
        <span class="kw">if</span> (it != items_.end()) items_.erase(it);
    }
};</pre>
            </div>

            <hr class="dim">

            <div class="full-code-label">ğŸ“„ test_mrulist.cpp</div>
            <div class="code-wrap">
                <div class="code-label">
                    <div class="dot dot-green"></div>test_mrulist.cpp â€” å®Œæ•´æµ‹è¯•æ–‡ä»¶
                </div>
                <pre><span class="macro">#include</span> <span class="str">&lt;catch2/catch_test_macros.hpp&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;catch2/catch_session.hpp&gt;</span>
<span class="macro">#include</span> <span class="str">&lt;string&gt;</span>
<span class="macro">#include</span> <span class="str">"MRUList.h"</span>

<span class="macro">TEST_CASE</span>(<span class="str">"An MRU list acts like a stack, "</span>
          <span class="str">"but duplicate entries replace existing ones"</span>)
{
    <span class="cm">// â”€â”€ Arrange â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="ty">MRUList</span>&lt;<span class="ty">std::string</span>&gt; list;

    <span class="cm">// â”€â”€ SECTION 1ï¼šåˆå§‹çŠ¶æ€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="macro">SECTION</span>(<span class="str">"An empty list has no elements"</span>)
    {
        <span class="macro">REQUIRE</span>( list.empty() );
        <span class="macro">REQUIRE</span>( list.size() == <span class="num">0</span> );
    }

    <span class="cm">// â”€â”€ SECTION 2ï¼šæ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="macro">SECTION</span>(<span class="str">"Adding to an empty list increases the size to 1"</span>)
    {
        list.<span class="fn">add</span>(<span class="str">"item1"</span>);

        <span class="macro">REQUIRE</span>( list.empty() == <span class="kw">false</span> );
        <span class="macro">REQUIRE</span>( list.size() == <span class="num">1</span> );
    }

    <span class="cm">// â”€â”€ SECTION 3ï¼šMRU é¡ºåºï¼ˆæœ€è¿‘ä½¿ç”¨æ’æœ€å‰ï¼‰â”€â”€â”€</span>
    <span class="macro">SECTION</span>(<span class="str">"Most recently added item is first"</span>)
    {
        list.<span class="fn">add</span>(<span class="str">"item1"</span>);
        list.<span class="fn">add</span>(<span class="str">"item2"</span>);
        list.<span class="fn">add</span>(<span class="str">"item3"</span>);

        <span class="macro">REQUIRE</span>( list.<span class="fn">top</span>() == <span class="str">"item3"</span> );
        <span class="macro">REQUIRE</span>( list.size() == <span class="num">3</span> );
    }

    <span class="cm">// â”€â”€ SECTION 4ï¼šæ ¸å¿ƒå»é‡è¯­ä¹‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="macro">SECTION</span>(<span class="str">"Adding a duplicate moves it to the front, not increases size"</span>)
    {
        list.<span class="fn">add</span>(<span class="str">"item1"</span>);
        list.<span class="fn">add</span>(<span class="str">"item2"</span>);
        list.<span class="fn">add</span>(<span class="str">"item1"</span>);   <span class="cm">// item1 åº”è¯¥ç§»åˆ°æœ€å‰ï¼Œsize ä¸å˜</span>

        <span class="macro">REQUIRE</span>( list.size() == <span class="num">2</span> );
        <span class="macro">REQUIRE</span>( list.<span class="fn">top</span>() == <span class="str">"item1"</span> );
        <span class="macro">REQUIRE</span>( list[<span class="num">1</span>] == <span class="str">"item2"</span> );
    }

    <span class="cm">// â”€â”€ SECTION 5ï¼šç´¢å¼•è®¿é—® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="macro">SECTION</span>(<span class="str">"Elements can be accessed by index"</span>)
    {
        list.<span class="fn">add</span>(<span class="str">"a"</span>);
        list.<span class="fn">add</span>(<span class="str">"b"</span>);
        list.<span class="fn">add</span>(<span class="str">"c"</span>);

        <span class="macro">REQUIRE</span>( list[<span class="num">0</span>] == <span class="str">"c"</span> );
        <span class="macro">REQUIRE</span>( list[<span class="num">1</span>] == <span class="str">"b"</span> );
        <span class="macro">REQUIRE</span>( list[<span class="num">2</span>] == <span class="str">"a"</span> );
    }

    <span class="cm">// â”€â”€ SECTION 6ï¼šè¶Šç•ŒæŠ›å‡ºå¼‚å¸¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
    <span class="macro">SECTION</span>(<span class="str">"top() on empty list throws"</span>)
    {
        <span class="macro">REQUIRE_THROWS_AS</span>( list.<span class="fn">top</span>(), <span class="ty">std::out_of_range</span> );
    }
}

<span class="kw">int</span> <span class="fn">main</span>(<span class="kw">int</span> argc, <span class="kw">char</span>* argv[]) {
    <span class="kw">return</span> <span class="ty">Catch</span>::<span class="fn">Session</span>().<span class="fn">run</span>(argc, argv);
}</pre>
            </div>

            <div class="result-box pass">
                <div class="result-icon">âœ“</div>
                <div><strong>å…¨éƒ¨é€šè¿‡</strong><br>
                    All tests passed (14 assertions in 1 test case)<br>
                    <br>ç¼–è¯‘å‘½ä»¤ï¼š<br>
                    g++ -std=c++17 test_mrulist.cpp -o test -lcatch2 &amp;&amp; ./test
                </div>
            </div>

            <div class="cards">
                <div class="card">
                    <div class="card-title">TDD å¾ªç¯æ€»ç»“</div>
                    <p>å®Œæˆäº† 3 è½® Redâ†’Greenâ†’Refactorï¼šåˆå§‹çŠ¶æ€ â†’ æ·»åŠ å…ƒç´  â†’ MRU å®Œæ•´è¯­ä¹‰ã€‚æ¯è½®åªåšä¸€ä»¶å°äº‹ï¼Œå¤æ‚åº¦åˆ†æ®µæ”¶æ•›ã€‚</p>
                </div>
                <div class="card">
                    <div class="card-title">ä¸ºä»€ä¹ˆç”¨ std::listï¼Ÿ</div>
                    <p>MRU æœ€é¢‘ç¹çš„æ“ä½œæ˜¯å¤´éƒ¨æ’å…¥å’Œéšæœºä½ç½®åˆ é™¤ï¼Œ<code>std::list</code> ä¸¤è€…å‡ä¸º O(1)ï¼ˆerase éœ€è¦å·²çŸ¥è¿­ä»£å™¨ï¼‰ã€‚ç´¢å¼•è®¿é—® O(n) ä½†ä¸æ˜¯ä¸»è¦æ“ä½œã€‚</p>
                </div>
                <div class="card">
                    <div class="card-title">æµ‹è¯•å³æ–‡æ¡£</div>
                    <p>6 ä¸ª SECTION åç§°è¿èµ·æ¥å°±æ˜¯å®Œæ•´çš„è¡Œä¸ºè§„èŒƒï¼šç©ºåˆ—è¡¨ã€æ·»åŠ ã€MRU é¡ºåºã€å»é‡ã€ç´¢å¼•è®¿é—®ã€å¼‚å¸¸è¾¹ç•Œã€‚</p>
                </div>
            </div>
        </div>

    </main>

    <script>
        const steps = document.querySelectorAll('.step');
        const tabs = document.querySelectorAll('nav button');
        let current = 0;

        function goto(i) {
            steps[current].classList.remove('active');
            tabs[current].classList.remove('active');
            current = i;
            steps[current].classList.add('active');
            tabs[current].classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Inject prev/next buttons into each step
        steps.forEach((step, i) => {
            const nav = document.createElement('div');
            nav.className = 'step-nav';
            const prev = document.createElement('button');
            prev.className = 'btn';
            prev.textContent = 'â† ä¸Šä¸€æ­¥';
            prev.disabled = i === 0;
            prev.onclick = () => goto(i - 1);
            const next = document.createElement('button');
            next.className = i === steps.length - 1 ? 'btn' : 'btn primary';
            next.textContent = i === steps.length - 1 ? 'âœ“ å®Œæˆ' : 'ä¸‹ä¸€æ­¥ â†’';
            next.disabled = i === steps.length - 1;
            next.onclick = () => goto(i + 1);
            nav.appendChild(prev);
            nav.appendChild(next);
            step.appendChild(nav);
        });
    </script>
</body>

</html>
